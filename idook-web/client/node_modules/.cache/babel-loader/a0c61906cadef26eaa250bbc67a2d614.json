{"ast":null,"code":"import React from'react';import{connect}from'react-redux';import{firestoreConnect}from'react-redux-firebase';import{compose}from'redux';import{Redirect}from'react-router-dom';import QRCode from'qrcode.react';import{Link}from'react-router-dom';import{deleteId as _deleteId}from\"../../store/actions/idActions\";//import {editId} from \"../../store/actions/idActions\"\nimport*as moment from'moment';import'moment/locale/pt-br';var IdDetail=function IdDetail(props){var handleDelete=function handleDelete(e){var id=props.id;e.preventDefault();//console.log(e)\nprops.deleteId(id);props.history.push('/');// you can push to dashboard after deleting...\n};var sids=props.sids,id=props.id;var auth=props.auth;var downloadQR=function downloadQR(){var canvas=document.getElementById(\"QrCode\");var pngUrl=canvas.toDataURL(\"image/png\").replace(\"image/png\",\"image/octet-stream\");var downloadLink=document.createElement(\"a\");downloadLink.href=pngUrl;downloadLink.download=\"QrCode.png\";document.body.appendChild(downloadLink);downloadLink.click();document.body.removeChild(downloadLink);};if(!auth.uid){return/*#__PURE__*/React.createElement(Redirect,{to:\"/signin\"});}if(sids){moment.locale('pt-br');var start=sids.createdAt.toDate();//const start = \"05/21/2020\"\nvar now=new Date();//const now = \"06/02/2020\"\nvar validade=sids.validade;// const range = moment.range(start, now)\nvar diff=moment(now,\"DD/MM/YYYY\").diff(moment(start,\"DD/MM/YYYY\",'days'));var duration=moment.duration(diff);var result=duration.format(\"ddd\");var expira=validade-result;var siteappAndroid=\"www.google.com\";var siteappIOS='www.apple.com';var whatsapplink='https://web.whatsapp.com/send?l=pt-BR&phone=55'+sids.phone+'&text='+sids.firstName+', bem%20vindo%20ao%20IDook%20do%20Sindpd.%20Voc%C3%AA%20pode%20fazer%20o%20download%20do%20aplicativo%20em%20'+siteappAndroid+' ou '+siteappIOS+'.%20Para%20acessar%20a%20sua%20carteirinha%20digital%20use%20o%20seu%20CPF%20e%20o%20c%C3%B3digo%20token%3A '+sids.token;// const decimal = Math.random(6);\nconsole.log(sids.tokenapp);//  console.log(decimal)\n// console.log(start)\n// console.log(now)\n// console.log(diff)\n//console.log(range)\n//console.log(result)\n//console.log(whatsapplink)\nif(expira<=0){//console.log(expira)\nreturn/*#__PURE__*/React.createElement(\"div\",{className:\"container section id-details\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col s12 m8\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card z-depht-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-content\"},/*#__PURE__*/React.createElement(\"span\",{className:\"card-title\"},sids.firstName,\" \",sids.lastName,\" \")),/*#__PURE__*/React.createElement(\"div\",{className:\"card-action\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col s12 m7\"},/*#__PURE__*/React.createElement(\"img\",{alt:\"peril\",src:sids.url,\"object-fit\":\"cover\",class:\"center circular--portraitM\"}),\"                                        \"),/*#__PURE__*/React.createElement(\"div\",{className:\"col s12 m5 center2\"},/*#__PURE__*/React.createElement(\"p\",null,\"Matricula: \",sids.matricula,\" \"),/*#__PURE__*/React.createElement(\"p\",null,\"Cargo: \",sids.cargo,\" \"),/*#__PURE__*/React.createElement(\"p\",null,\"Empresa: \",sids.empresa),/*#__PURE__*/React.createElement(\"p\",null,\"CPF: \",sids.cpf),/*#__PURE__*/React.createElement(\"p\",null,\"Cidade: \",sids.city),/*#__PURE__*/React.createElement(\"p\",null,\"Estado: \",sids.uf)))),/*#__PURE__*/React.createElement(\"div\",{className:\"card-action\"},/*#__PURE__*/React.createElement(\"span\",{className:\"card-title\"},\"Contato\"),/*#__PURE__*/React.createElement(\"p\",null,\"Email: \",sids.email,\"  \"),/*#__PURE__*/React.createElement(\"p\",null,\"Telefone: \",sids.phone,\"  \")))),/*#__PURE__*/React.createElement(\"div\",{className:\"col s12 m4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card z-depht-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-content\"},/*#__PURE__*/React.createElement(\"span\",{className:\"card-title\"},\"Administrar\")),/*#__PURE__*/React.createElement(\"div\",{className:\"card-action\"},/*#__PURE__*/React.createElement(\"div\",{\"object-fit\":\"cover\",class:\"center\"},/*#__PURE__*/React.createElement(QRCode,{id:\"QrCode\",class:\"center3\",value:\"MECARD: N:\"+sids.firstName+sids.lastName+\"; TEL:\"+sids.phone+\"; EMAIL: \"+sids.email+\"; ORG: \"+sids.empresa+\";\",responsive:true,renderAs:\"png\"}),/*#__PURE__*/React.createElement(\"p\",{onClick:downloadQR},\" Download QR \"))),/*#__PURE__*/React.createElement(\"div\",{className:\"card-action\"},/*#__PURE__*/React.createElement(\"p\",{className:\"black-text\"},\"Criado em: \",moment(sids.createdAt.toDate()).calendar()),/*#__PURE__*/React.createElement(\"p\",{className:\"black-text\"},\"Validade: \",validade,\" dias\"),/*#__PURE__*/React.createElement(\"p\",{className:\"red-text\"},\"Expirou\")),/*#__PURE__*/React.createElement(\"div\",{className:\"card-action\"},/*#__PURE__*/React.createElement(\"button\",{onClick:handleDelete,className:\"btn z-depth-0\"},\"Deletar\"),/*#__PURE__*/React.createElement(Link,{to:'/editid/'+id,key:id},/*#__PURE__*/React.createElement(\"button\",{className:\"btn z-depth-0\"},\"Editar\")))))));}return/*#__PURE__*/React.createElement(\"div\",{className:\"container section id-details\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col s12 m8 \"},/*#__PURE__*/React.createElement(\"div\",{className:\"card z-depht-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-content\"},/*#__PURE__*/React.createElement(\"span\",{className:\"card-title\"},sids.firstName,\" \",sids.lastName,\" \")),/*#__PURE__*/React.createElement(\"div\",{className:\"card-action\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col s12 m7\"},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"img\",{alt:\"perfil\",src:sids.url,\"object-fit\":\"cover\",class:\"center circular--portraitM\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col s12 m5 center2\"},/*#__PURE__*/React.createElement(\"p\",null,\"Matricula: \",sids.matricula,\" \"),/*#__PURE__*/React.createElement(\"p\",null,\"Cargo: \",sids.cargo,\" \"),/*#__PURE__*/React.createElement(\"p\",null,\"Empresa: \",sids.empresa),/*#__PURE__*/React.createElement(\"p\",null,\"CPF: \",sids.cpf),/*#__PURE__*/React.createElement(\"p\",null,\"Cidade: \",sids.city),/*#__PURE__*/React.createElement(\"p\",null,\"Estado: \",sids.uf)))),/*#__PURE__*/React.createElement(\"div\",{className:\"card-action\"},/*#__PURE__*/React.createElement(\"span\",{className:\"card-title\"},\"Contato\"),/*#__PURE__*/React.createElement(\"p\",null,\"Email: \",sids.email,\"  \"),/*#__PURE__*/React.createElement(\"p\",null,\"Telefone: \",sids.phone,\"  \")),/*#__PURE__*/React.createElement(\"div\",{className:\"card-action\"},/*#__PURE__*/React.createElement(\"a\",{target:\"_blank\",rel:\"noopener noreferrer\",href:whatsapplink,className:\"btn z-depth-0\"},\"Reenviar Token\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"col s12 m4 \"},/*#__PURE__*/React.createElement(\"div\",{className:\"card z-depht-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-content\"},/*#__PURE__*/React.createElement(\"span\",{className:\"card-title\"},\"Administrar\")),/*#__PURE__*/React.createElement(\"div\",{className:\"card-action\"},/*#__PURE__*/React.createElement(\"div\",{\"object-fit\":\"contain\",class:\"center\"},/*#__PURE__*/React.createElement(QRCode,{class:\"center3\",value:\"MECARD: N:\"+sids.firstName+\" \"+sids.lastName+\"; TEL:\"+sids.phone+\"; EMAIL: \"+sids.email+\"; ORG: \"+sids.empresa+\";\",responsive:true,id:\"QrCode\",renderAs:\"png\"}),/*#__PURE__*/React.createElement(\"p\",{onClick:downloadQR},\" Download QR \"))),/*#__PURE__*/React.createElement(\"div\",{className:\"card-action\"},/*#__PURE__*/React.createElement(\"p\",{className:\"black-text\"},\"Criado em: \",moment(sids.createdAt.toDate()).calendar()),/*#__PURE__*/React.createElement(\"p\",{className:\"black-text\"},\"Validade: \",validade,\" dias\"),/*#__PURE__*/React.createElement(\"p\",null,\"Expira em: \",expira,\" dias \")),/*#__PURE__*/React.createElement(\"div\",{className:\"card-action\"},/*#__PURE__*/React.createElement(\"button\",{onClick:handleDelete,className:\"btn z-depth-0\"},\"Deletar\"),/*#__PURE__*/React.createElement(Link,{to:'/editid/'+id,key:id},/*#__PURE__*/React.createElement(\"button\",{className:\"btn z-depth-0\"},\"Editar\")))))));}else{return/*#__PURE__*/React.createElement(\"div\",{className:\"container center\"},/*#__PURE__*/React.createElement(\"p\",null,\"Carregando...\"));}};var mapStateToProps=function mapStateToProps(state,ownProps){//console.log(state);\nvar id=ownProps.match.params.id;var ids=state.firestore.data.ids;var sids=ids?ids[id]:null;return{id:id,sids:sids,auth:state.firebase.auth};};var mapDistpacthToProps=function mapDistpacthToProps(dispatch){return{deleteId:function deleteId(id){return dispatch(_deleteId(id));}};};export default compose(connect(mapStateToProps,mapDistpacthToProps),firestoreConnect([{collection:'ids'}]))(IdDetail);","map":{"version":3,"sources":["/home/thabataganga/Documentos/GITHUB/idook/idook/idook-web/client/src/components/ids/IdDetails.js"],"names":["React","connect","firestoreConnect","compose","Redirect","QRCode","Link","deleteId","moment","IdDetail","props","handleDelete","e","id","preventDefault","history","push","sids","auth","downloadQR","canvas","document","getElementById","pngUrl","toDataURL","replace","downloadLink","createElement","href","download","body","appendChild","click","removeChild","uid","locale","start","createdAt","toDate","now","Date","validade","diff","duration","result","format","expira","siteappAndroid","siteappIOS","whatsapplink","phone","firstName","token","console","log","tokenapp","lastName","url","matricula","cargo","empresa","cpf","city","uf","email","calendar","mapStateToProps","state","ownProps","match","params","ids","firestore","data","firebase","mapDistpacthToProps","dispatch","collection"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { firestoreConnect } from 'react-redux-firebase';\nimport { compose } from 'redux';\nimport { Redirect } from 'react-router-dom';\nimport QRCode from 'qrcode.react';\nimport { Link } from 'react-router-dom'\n\nimport {deleteId} from \"../../store/actions/idActions\"\n//import {editId} from \"../../store/actions/idActions\"\n\nimport * as moment from 'moment'; import 'moment/locale/pt-br'\n\nconst IdDetail = (props) => {\n\n    const handleDelete = (e) => {\n        const { id } = props;\n        e.preventDefault();\n        //console.log(e)\n        props.deleteId(id);\n        props.history.push('/');\n        // you can push to dashboard after deleting...\n}\n\n    \n    const { sids, id } = props;\n\n    const { auth } = props;\n\n    const downloadQR = () => {\n        const canvas = document.getElementById(\"QrCode\");\n        const pngUrl = canvas\n          .toDataURL(\"image/png\")\n          .replace(\"image/png\", \"image/octet-stream\");\n        let downloadLink = document.createElement(\"a\");\n        downloadLink.href = pngUrl;\n        downloadLink.download = \"QrCode.png\";\n        document.body.appendChild(downloadLink);\n        downloadLink.click();\n        document.body.removeChild(downloadLink);\n      };\n\n    if (!auth.uid) {\n        return <Redirect to=\"/signin\" />;\n    }\n\n\n\n    if (sids) {\n        moment.locale('pt-br')\n\n        const start = sids.createdAt.toDate();\n      \n        //const start = \"05/21/2020\"\n      \n        const now = new Date();\n      \n        //const now = \"06/02/2020\"\n      \n        const validade = sids.validade;\n        \n       // const range = moment.range(start, now)\n\n        let diff = moment(now, \"DD/MM/YYYY\").diff(moment(start, \"DD/MM/YYYY\", 'days'));\n      \n\n        let duration = moment.duration(diff)\n      \n        let result = duration.format(\"ddd\")\n      \n        const expira = validade - result;\n        var siteappAndroid = \"www.google.com\"\n        var siteappIOS = 'www.apple.com'\n\n        var whatsapplink = 'https://web.whatsapp.com/send?l=pt-BR&phone=55'+ sids.phone + '&text=' + sids.firstName +', bem%20vindo%20ao%20IDook%20do%20Sindpd.%20Voc%C3%AA%20pode%20fazer%20o%20download%20do%20aplicativo%20em%20' + siteappAndroid + ' ou ' + siteappIOS + '.%20Para%20acessar%20a%20sua%20carteirinha%20digital%20use%20o%20seu%20CPF%20e%20o%20c%C3%B3digo%20token%3A ' + sids.token ;\n       // const decimal = Math.random(6);\n        console.log(sids.tokenapp)\n      //  console.log(decimal)\n       \n        // console.log(start)\n       // console.log(now)\n\n       // console.log(diff)\n        //console.log(range)\n        //console.log(result)\n        //console.log(whatsapplink)\n\n\n        if (expira <= 0) {\n            //console.log(expira)\n\n\n\n            return (\n                <div className='container section id-details'>\n\n                    <div className='row'>\n\n                        <div className='col s12 m8'>\n\n                            <div className='card z-depht-0'>\n                                <div className='card-content'>\n\n                                    <span className='card-title'>{sids.firstName} {sids.lastName} </span>\n\n                                </div>\n                                <div className='card-action'>\n\n                                    <div className='row'>\n                                        <div className='col s12 m7'>\n                                        <img alt=\"peril\" src={sids.url} object-fit='cover' class=\"center circular--portraitM\" />                                        </div>\n                                        <div className='col s12 m5 center2'>\n                                            <p>Matricula: {sids.matricula} </p>\n                                            <p>Cargo: {sids.cargo} </p>\n                                            <p>Empresa: {sids.empresa}</p>\n                                            <p>CPF: {sids.cpf}</p>\n                                            <p>Cidade: {sids.city}</p>\n                                            <p>Estado: {sids.uf}</p>\n                                        </div>\n                                    </div>\n\n\n                                </div>\n                                <div className='card-action'>\n                                    <span className='card-title'>Contato</span>\n                                    <p>Email: {sids.email}  </p>\n                                    <p>Telefone: {sids.phone}  </p>\n                                </div>\n\n\n                            </div>\n\n                        </div>\n                        <div className='col s12 m4'>\n                            <div className='card z-depht-0'>\n                                <div className='card-content'>\n\n                                    <span className='card-title'>Administrar</span>\n\n                                </div>\n                                <div className='card-action'>\n                                    <div object-fit='cover' class=\"center\">\n                                        <QRCode\n                                            id=\"QrCode\"\n                                            class=\"center3\"\n                                            value={\"MECARD: N:\" + sids.firstName + sids.lastName + \"; TEL:\" + sids.phone + \"; EMAIL: \" + sids.email + \"; ORG: \" + sids.empresa + \";\"}\n                                            responsive={true}\n                                            renderAs=\"png\"\n\n                                        />\n                                        <p onClick={downloadQR}> Download QR </p>\n                                    </div>\n                                </div>\n\n                                <div className='card-action'>\n                                    <p className='black-text'>Criado em: {moment(sids.createdAt.toDate()).calendar()}</p>\n                                    <p className='black-text'>Validade: {validade} dias</p>\n                                    <p className=\"red-text\">Expirou</p>\n                                </div>\n\n                                <div className='card-action'>\n                                    <button onClick={handleDelete} className=\"btn z-depth-0\">Deletar</button>\n                                    <Link to={'/editid/' + id} key={id}><button className=\"btn z-depth-0\">Editar</button></Link>\n                                </div>\n\n                            </div>\n\n                        </div>\n\n                    </div>\n\n                </div>\n            );\n\n\n        }\n\n        return (\n            <div className='container section id-details'>\n\n                <div className='row'>\n\n                    <div className='col s12 m8 '>\n\n                        <div className='card z-depht-0'>\n                            <div className='card-content'>\n\n                                <span className='card-title'>{sids.firstName} {sids.lastName} </span>\n\n                            </div>\n                            <div className='card-action'>\n\n                                <div className='row'>\n                                    <div className='col s12 m7'>\n                                        <br/>\n                                        <img alt=\"perfil\" src={sids.url} object-fit='cover' class=\"center circular--portraitM\" />\n                                    </div>\n                                    <div className='col s12 m5 center2'>\n                                        <p>Matricula: {sids.matricula} </p>\n                                        <p>Cargo: {sids.cargo} </p>\n                                        <p>Empresa: {sids.empresa}</p>\n                                        <p>CPF: {sids.cpf}</p>\n                                        <p>Cidade: {sids.city}</p>\n                                        <p>Estado: {sids.uf}</p>\n                                    </div>\n                                </div>\n\n\n                            </div>\n                            <div className='card-action'>\n                                <span className='card-title'>Contato</span>\n                                <p>Email: {sids.email}  </p>\n                                <p>Telefone: {sids.phone}  </p>\n                            </div>\n\n                            <div className='card-action'>\n                                <a  target=\"_blank\" rel=\"noopener noreferrer\"  href={whatsapplink} className=\"btn z-depth-0\">Reenviar Token</a>\n                                </div>\n\n\n                        </div>\n\n                    </div>\n                    <div className='col s12 m4 '>\n                        <div className='card z-depht-0'>\n                            <div className='card-content'>\n\n                                <span className='card-title'>Administrar</span>\n\n                            </div>\n                            <div className='card-action'>\n                                <div object-fit='contain' class=\"center\">\n                                    <QRCode\n                                        class=\"center3\"\n                                        value={\"MECARD: N:\" + sids.firstName + \" \" + sids.lastName + \"; TEL:\" + sids.phone + \"; EMAIL: \" + sids.email + \"; ORG: \" + sids.empresa + \";\"}\n                                        responsive={true}\n                                        id=\"QrCode\"\n                                        renderAs=\"png\"\n\n\n                                    />\n                                    <p onClick={downloadQR}> Download QR </p>\n                                </div>\n                            </div>\n\n                            <div className='card-action'>\n                                <p className='black-text'>Criado em: {moment(sids.createdAt.toDate()).calendar()}</p>\n                                <p className='black-text'>Validade: {validade} dias</p>\n                                <p>Expira em: {expira} dias </p>\n                            </div>\n\n                            <div className='card-action'>\n                                <button onClick={handleDelete} className=\"btn z-depth-0\">Deletar</button>\n                                <Link to={'/editid/' + id} key={id}><button className=\"btn z-depth-0\">Editar</button></Link>\n                            </div>\n\n                        </div>\n\n                    </div>\n\n                </div>\n\n\n            </div>\n        )\n\n    }\n    else {\n        return (\n            <div className='container center'>\n                <p>Carregando...</p>\n            </div>\n        )\n    }\n\n\n}\n\nconst mapStateToProps = (state, ownProps) => {\n    //console.log(state);\n    const id = ownProps.match.params.id;\n    const ids = state.firestore.data.ids;\n    const sids = ids ? ids[id] : null\n    return {\n        id:id,\n        sids: sids,\n        auth: state.firebase.auth\n    }\n}\n\nconst mapDistpacthToProps = dispatch => {\n    return {\n        deleteId: (id) => dispatch(deleteId(id))\n    }\n}\n\nexport default compose(\n    connect(mapStateToProps, mapDistpacthToProps),\n    firestoreConnect([\n        { collection: 'ids' }\n    ])\n)(IdDetail)\n"]},"metadata":{},"sourceType":"module"}